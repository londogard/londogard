"use strict";(self.webpackChunklondogard=self.webpackChunklondogard||[]).push([[4597],{3905:function(t,e,a){a.d(e,{Zo:function(){return d},kt:function(){return h}});var n=a(7294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function i(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},i=Object.keys(t);for(n=0;n<i.length;n++)a=i[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var s=n.createContext({}),p=function(t){var e=n.useContext(s),a=e;return t&&(a="function"==typeof t?t(e):l(l({},e),t)),a},d=function(t){var e=p(t.components);return n.createElement(s.Provider,{value:e},t.children)},m={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},u=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,i=t.originalType,s=t.parentName,d=o(t,["components","mdxType","originalType","parentName"]),u=p(a),h=r,c=u["".concat(s,".").concat(h)]||u[h]||m[h]||i;return a?n.createElement(c,l(l({ref:e},d),{},{components:a})):n.createElement(c,l({ref:e},d))}));function h(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var i=a.length,l=new Array(i);l[0]=u;var o={};for(var s in e)hasOwnProperty.call(e,s)&&(o[s]=e[s]);o.originalType=t,o.mdxType="string"==typeof t?t:r,l[1]=o;for(var p=2;p<i;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},9630:function(t,e,a){a.r(e),a.d(e,{frontMatter:function(){return o},contentTitle:function(){return s},metadata:function(){return p},assets:function(){return d},toc:function(){return m},default:function(){return h}});var n=a(7462),r=a(3366),i=(a(7294),a(3905)),l=["components"],o={description:"I built a baby monitor! Built using Python, Svelte & Raspberry Pi.",tags:["python"],title:"Baby Monitor pt 2",authors:"hlondogard"},s=void 0,p={permalink:"/blog/2023/02/06/baby-monitor-pt-p2",editUrl:"https://github.com/londogard/londogard/blog/2023-02-06-baby-monitor-pt-p2/index.md",source:"@site/blog/2023-02-06-baby-monitor-pt-p2/index.md",title:"Baby Monitor pt 2",description:"I built a baby monitor! Built using Python, Svelte & Raspberry Pi.",date:"2023-02-06T00:00:00.000Z",formattedDate:"February 6, 2023",tags:[{label:"python",permalink:"/blog/tags/python"}],readingTime:3.715,truncated:!0,authors:[{name:"Hampus Lond\xf6g\xe5rd",title:"Main Contributor of Londogard",url:"https://github.com/lundez",imageURL:"https://github.com/lundez.png",key:"hlondogard"}],frontMatter:{description:"I built a baby monitor! Built using Python, Svelte & Raspberry Pi.",tags:["python"],title:"Baby Monitor pt 2",authors:"hlondogard"},nextItem:{title:"Polars - A Refreshingly Great DataFrame Library",permalink:"/blog/2022/11/30/why-polars"}},d={authorsImageUrls:[void 0]},m=[{value:"Implementation Details",id:"implementation-details",children:[{value:"Hardware Details",id:"hardware-details",children:[],level:3},{value:"Software Stack",id:"software-stack",children:[{value:"Webapp Client",id:"webapp-client",children:[],level:4},{value:"Server/Backend",id:"serverbackend",children:[],level:4}],level:3}],level:2},{value:"End Result",id:"end-result",children:[{value:"Images of the Building Process",id:"images-of-the-building-process",children:[],level:3}],level:2},{value:"A sad ending",id:"a-sad-ending",children:[],level:2}],u={toc:m};function h(t){var e=t.components,o=(0,r.Z)(t,l);return(0,i.kt)("wrapper",(0,n.Z)({},u,o,{components:e,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Back in action and finalizing the baby monitor!\ud83d\udc76"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"TL;DR"),"\nBuilt a baby monitor that included the following features:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Bidirectional Audio & Unidirectional Video (Night & Day Vision!)"),(0,i.kt)("li",{parentName:"ol"},"Temperature Sensor"),(0,i.kt)("li",{parentName:"ol"},"Motor (Servo) to move left/right & up/down")),(0,i.kt)("p",null,"The project was born the day I met an old friend and saw his expensive baby monitor that he had been gifted, I needed to match it! \ud83e\udd13"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Result:"),"\n",(0,i.kt)("img",{alt:"300",src:a(4821).Z,width:"929",height:"749"}),"\nI'm very happy about the results, my wife asked me to draw a smile on the creepy monitor, hence the smile! \ud83d\ude1c",(0,i.kt)("br",{parentName:"p"}),"\n","Video of it running live can be found at the end!"),(0,i.kt)("h2",{id:"implementation-details"},"Implementation Details"),(0,i.kt)("p",null,"To implement and build this camera I had to combine both hardware and software into a package. "),(0,i.kt)("h3",{id:"hardware-details"},"Hardware Details"),(0,i.kt)("p",null,"Most of my hardware was bought through Aliexpress, with few parts being from an old Pi."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Hardware"),(0,i.kt)("th",{parentName:"tr",align:null},"Functionality"),(0,i.kt)("th",{parentName:"tr",align:null},"Software Required/Used"),(0,i.kt)("th",{parentName:"tr",align:null},"Notes"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Raspberry Pi 3B+"),(0,i.kt)("td",{parentName:"tr",align:null},"The Brain which powers everything"),(0,i.kt)("td",{parentName:"tr",align:null},"Raspberry Pi OS Lite (Bullseye)"),(0,i.kt)("td",{parentName:"tr",align:null},"This OS uses the new Open Source camera-stack, Libcamera!")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://www.aliexpress.com/item/4000143479592.html"},"DS18B20")),(0,i.kt)("td",{parentName:"tr",align:null},"Temperature Sensor"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://github.com/timofurrer/w1thermsensor"},"W1ThermSensor")),(0,i.kt)("td",{parentName:"tr",align:null},"I wish I found this earlier, at first I parsed the raw file myself. And it was hard to find set-up instructions!")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://www.aliexpress.com/item/1623404058.html"},"Nylon FPV Servo")),(0,i.kt)("td",{parentName:"tr",align:null},"Servo Motor (moving the camera)"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://gpiozero.readthedocs.io/en/stable/"},"gpiozero")),(0,i.kt)("td",{parentName:"tr",align:null},"A brilliant library. It has to be noted that this servo works through Pulse Width Modulation (PWM) and to make the servos quite we need to set ",(0,i.kt)("inlineCode",{parentName:"td"},"servo.value=None")," after setting it to a value. Complicates the configuration a little.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://www.aliexpress.com/item/32668508991.html"},"Raspberry Pi 4 Camera 5MP")),(0,i.kt)("td",{parentName:"tr",align:null},"Camera with IR-cut (IR on/off via hardware automatically)"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://libcamera.org/"},"libcamera")," / ",(0,i.kt)("a",{parentName:"td",href:"https://github.com/raspberrypi/picamera2"},"picamera2")),(0,i.kt)("td",{parentName:"tr",align:null},"Very simple to use over all. Tricky that you needed to focus it yourself, I thought it was broken first! \ud83d\ude06")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://aiyprojects.withgoogle.com/voice-v1/"},"Microphone from Google AIY v1")),(0,i.kt)("td",{parentName:"tr",align:null},"Record sound"),(0,i.kt)("td",{parentName:"tr",align:null},"This is tricky because of the HAT, requires custom installation."),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://aiyprojects.withgoogle.com/voice-v1/"},"Speaker from Google AIY v1")),(0,i.kt)("td",{parentName:"tr",align:null},"Play sound"),(0,i.kt)("td",{parentName:"tr",align:null}),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://aiyprojects.withgoogle.com/voice-v1/"},"Pi HAT from Google AIY v1")),(0,i.kt)("td",{parentName:"tr",align:null},"Combine sensors, microphone & speakers"),(0,i.kt)("td",{parentName:"tr",align:null}),(0,i.kt)("td",{parentName:"tr",align:null})))),(0,i.kt)("h3",{id:"software-stack"},"Software Stack"),(0,i.kt)("p",null,"To make use of my beautiful hardware I need software!\nKeeping things simple (KISS) I decided to use a Python backend and show it through a simple webapp. That way I can view the baby monitor from my PC, Smartphone & anything that has a browser really."),(0,i.kt)("p",null,"The end result became as follows \ud83d\udc47\n",(0,i.kt)("img",{src:a(3900).Z,width:"920",height:"469"})),(0,i.kt)("h4",{id:"webapp-client"},"Webapp Client"),(0,i.kt)("p",null,"Over all I really enjoyed playing around with ",(0,i.kt)("a",{parentName:"p",href:"https://svelte.dev/"},"Svelte"),". It felt very straight-forward and simple, although there's less community and libraries compared to ",(0,i.kt)("a",{parentName:"p",href:"https://reactjs.org/"},"React"),".\nAll in all I'd give it one up compared to React because of simplicity, but I'm just a ordinary Backend Dev / Data Engineer+Scientist."),(0,i.kt)("h4",{id:"serverbackend"},"Server/Backend"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://fastapi.tiangolo.com/"},"FastAPI")," as always is a blessing to work with! The auto-generated swagger page, superb type integration and much more makes me feel right at home as someone who's really a Scala-dev.\ud83d\ude09\nFastAPI has its drawbacks though, the streaming component definitely showed some rather large overhead. I had to fall back to raw http to have good performance \ud83d\ude30"),(0,i.kt)("p",null,"The end result became two backends, but I tried to keep the responsibilities clear and it worked out fine!"),(0,i.kt)("h2",{id:"end-result"},"End Result"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"350",src:a(4821).Z,width:"929",height:"749"}),"\nAnd a video to show how real-time it is!"),(0,i.kt)("video",{controls:!0,src:"/video/Studio_Project.mp4",type:"video/mp4",width:"350"}),(0,i.kt)("p",null,"I'm very happy about the results!"),(0,i.kt)("h3",{id:"images-of-the-building-process"},"Images of the Building Process"),(0,i.kt)("p",null,"And some images of when I built the monitor!"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"What"),(0,i.kt)("th",{parentName:"tr",align:null},"Image"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Building the Camera"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("img",{alt:"350",src:a(3514).Z,width:"4032",height:"3024"}))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Connecting the final piece of Camera"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("img",{alt:"350",src:a(9775).Z,width:"4032",height:"3024"}))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Building Temperature Sensor"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("img",{alt:"350",src:a(9269).Z,width:"4032",height:"3024"}))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Connecting Temperature, Pi & Camera"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("img",{alt:"350",src:a(5736).Z,width:"4032",height:"3024"}))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Manual Temperature Validation"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("img",{alt:"350",src:a(9834).Z,width:"4032",height:"3024"}))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Testing the Servo"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("video",{controls:!0,src:"/video/20220927_195156.mp4",type:"video/mp4",width:"350"}))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Connecting all in a paper box"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("img",{alt:"350",src:a(3571).Z,width:"4032",height:"3024"}))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"First Wooden Baby Monitor Prototype"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("img",{alt:"350",src:a(2286).Z,width:"4032",height:"3024"}))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Final Wooden Baby Monitor"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("img",{alt:"350",src:a(6422).Z,width:"900",height:"1600"}))))),(0,i.kt)("h2",{id:"a-sad-ending"},"A sad ending"),(0,i.kt)("p",null,"The servo motors showed to be too weak which interestingly means they're too strong.\nAs they try to move the housing it works slowly until it move everything at once which creates a force stronger than the pad that the monitor was standing on."),(0,i.kt)("p",null,"The end result was... Sweet release of machine breakage \ud83d\ude22"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"350",src:a(8281).Z,width:"4032",height:"3024"})," ",(0,i.kt)("img",{alt:"350",src:a(3485).Z,width:"4032",height:"3024"})),(0,i.kt)("p",null,"That's it for this time! Now I look forward to become a father! \ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66",(0,i.kt)("br",{parentName:"p"}),"\n","~Hampus Lond\xf6g\xe5rd"))}h.isMDXComponent=!0},3514:function(t,e,a){e.Z=a.p+"assets/images/20220924_200441-324d354f777f00e8f136f9c029d42580.jpg"},9775:function(t,e,a){e.Z=a.p+"assets/images/20220924_201132-ff28f1b879de7c2837748ba8c2255a61.jpg"},9269:function(t,e,a){e.Z=a.p+"assets/images/20220924_203146-4439cf6fbfd57e514656f21a2267821e.jpg"},5736:function(t,e,a){e.Z=a.p+"assets/images/20220927_174516-11f6a5d756b803ee5b2a63ef9876b789.jpg"},9834:function(t,e,a){e.Z=a.p+"assets/images/20220927_174522-e76652f83a618233bbdaa9cf48a98369.jpg"},3571:function(t,e,a){e.Z=a.p+"assets/images/20221204_191914-f47ef0313a7cac33a065d2ce0f0e9d36.jpg"},2286:function(t,e,a){e.Z=a.p+"assets/images/20230108_160751-bad2fce9c1777b2c22f417d6a386be6f.jpg"},8281:function(t,e,a){e.Z=a.p+"assets/images/20230120_185651-557ad05aebcc436a0f1e5011b96c8282.jpg"},3485:function(t,e,a){e.Z=a.p+"assets/images/20230128_113031-4cb027b2109467da986e8889e94e3bd1.jpg"},4821:function(t,e,a){e.Z=a.p+"assets/images/20230206181407-58fa72829e55d9387c0671854eb34af4.png"},3900:function(t,e,a){e.Z=a.p+"assets/images/20230206201818-d4af409e4a03762153ca2016afea2f7f.png"},6422:function(t,e,a){e.Z=a.p+"assets/images/signal-2023-01-08-20-34-58-840-673663fefd248400c26a23cdb1edaeee.jpg"}}]);