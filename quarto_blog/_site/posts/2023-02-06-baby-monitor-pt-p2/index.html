<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2023-02-06">
<meta name="description" content="I built a baby monitor! Built using Python, Svelte &amp; Raspberry Pi.">

<title>Londogard Blog - Baby Monitor pt 2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
<meta name="twitter:title" content="Londogard Blog - Baby Monitor pt 2">
<meta name="twitter:description" content="I built a baby monitor! Built using Python, Svelte &amp; Raspberry Pi.">
<meta name="twitter:creator" content="@hlondogard">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Londogard Blog</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/hampus-londögård/"><i class="bi bi-linkedin" role="img" aria-label="LinkedIn">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/hlondogard"><i class="bi bi-twitter" role="img" aria-label="Twitter">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-bi-github" role="button" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-bi-github">    
        <li>
    <a class="dropdown-item" href="https://github.com/lundez"><i class="bi bi-github" role="img">
</i> 
 <span class="dropdown-text">Lundez</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/londogard"><i class="bi bi-github" role="img">
</i> 
 <span class="dropdown-text">Londogard</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"><i class="bi bi-rss" role="img" aria-label="Londogard Blog RSS">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Baby Monitor pt 2</h1>
                  <div>
        <div class="description">
          I built a baby monitor! Built using Python, Svelte &amp; Raspberry Pi.
        </div>
      </div>
                </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>hlondogard </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">February 6, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>Back in action and finalizing the baby monitor!👶</p>
<p><strong>TL;DR</strong> Built a baby monitor that included the following features:</p>
<ol type="1">
<li>Bidirectional Audio &amp; Unidirectional Video (Night &amp; Day Vision!)</li>
<li>Temperature Sensor</li>
<li>Motor (Servo) to move left/right &amp; up/down</li>
</ol>
<p>The project was born the day I met an old friend and saw his expensive baby monitor that he had been gifted, I needed to match it! 🤓</p>
<!--truncate-->
<p><strong>Result:</strong> <img src="20230206181407.png" class="img-fluid" alt="300"> I’m very happy about the results, my wife asked me to draw a smile on the creepy monitor, hence the smile! 😜 Video of it running live can be found at the end!</p>
<section id="implementation-details" class="level2">
<h2 class="anchored" data-anchor-id="implementation-details">Implementation Details</h2>
<p>To implement and build this camera I had to combine both hardware and software into a package.</p>
<section id="hardware-details" class="level3">
<h3 class="anchored" data-anchor-id="hardware-details">Hardware Details</h3>
<p>Most of my hardware was bought through Aliexpress, with few parts being from an old Pi.</p>
<table class="table">
<thead>
<tr class="header">
<th>Hardware</th>
<th>Functionality</th>
<th>Software Required/Used</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Raspberry Pi 3B+</td>
<td>The Brain which powers everything</td>
<td>Raspberry Pi OS Lite (Bullseye)</td>
<td>This OS uses the new Open Source camera-stack, Libcamera!</td>
</tr>
<tr class="even">
<td><a href="https://www.aliexpress.com/item/4000143479592.html">DS18B20</a></td>
<td>Temperature Sensor</td>
<td><a href="https://github.com/timofurrer/w1thermsensor">W1ThermSensor</a></td>
<td>I wish I found this earlier, at first I parsed the raw file myself. And it was hard to find set-up instructions!</td>
</tr>
<tr class="odd">
<td><a href="https://www.aliexpress.com/item/1623404058.html">Nylon FPV Servo</a></td>
<td>Servo Motor (moving the camera)</td>
<td><a href="https://gpiozero.readthedocs.io/en/stable/">gpiozero</a></td>
<td>A brilliant library. It has to be noted that this servo works through Pulse Width Modulation (PWM) and to make the servos quite we need to set <code>servo.value=None</code> after setting it to a value. Complicates the configuration a little.</td>
</tr>
<tr class="even">
<td><a href="https://www.aliexpress.com/item/32668508991.html">Raspberry Pi 4 Camera 5MP</a></td>
<td>Camera with IR-cut (IR on/off via hardware automatically)</td>
<td><a href="https://libcamera.org/">libcamera</a> / <a href="https://github.com/raspberrypi/picamera2">picamera2</a></td>
<td>Very simple to use over all. Tricky that you needed to focus it yourself, I thought it was broken first! 😆</td>
</tr>
<tr class="odd">
<td><a href="https://aiyprojects.withgoogle.com/voice-v1/">Microphone from Google AIY v1</a></td>
<td>Record sound</td>
<td>This is tricky because of the HAT, requires custom installation.</td>
<td></td>
</tr>
<tr class="even">
<td><a href="https://aiyprojects.withgoogle.com/voice-v1/">Speaker from Google AIY v1</a></td>
<td>Play sound</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><a href="https://aiyprojects.withgoogle.com/voice-v1/">Pi HAT from Google AIY v1</a></td>
<td>Combine sensors, microphone &amp; speakers</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="software-stack" class="level3">
<h3 class="anchored" data-anchor-id="software-stack">Software Stack</h3>
<p>To make use of my beautiful hardware I need software! Keeping things simple (KISS) I decided to use a Python backend and show it through a simple webapp. That way I can view the baby monitor from my PC, Smartphone &amp; anything that has a browser really.</p>
<p>The end result became as follows 👇 <img src="20230206201818.png" class="img-fluid"></p>
<section id="webapp-client" class="level4">
<h4 class="anchored" data-anchor-id="webapp-client">Webapp Client</h4>
<p>Over all I really enjoyed playing around with <a href="https://svelte.dev/">Svelte</a>. It felt very straight-forward and simple, although there’s less community and libraries compared to <a href="https://reactjs.org/">React</a>. All in all I’d give it one up compared to React because of simplicity, but I’m just a ordinary Backend Dev / Data Engineer+Scientist.</p>
</section>
<section id="serverbackend" class="level4">
<h4 class="anchored" data-anchor-id="serverbackend">Server/Backend</h4>
<p><a href="https://fastapi.tiangolo.com/">FastAPI</a> as always is a blessing to work with! The auto-generated swagger page, superb type integration and much more makes me feel right at home as someone who’s really a Scala-dev.😉 FastAPI has its drawbacks though, the streaming component definitely showed some rather large overhead. I had to fall back to raw http to have good performance 😰</p>
<p>The end result became two backends, but I tried to keep the responsibilities clear and it worked out fine!</p>
</section>
</section>
</section>
<section id="end-result" class="level2">
<h2 class="anchored" data-anchor-id="end-result">End Result</h2>
<p><img src="20230206181407.png" class="img-fluid" alt="350"> And a video to show how real-time it is!</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><video src="Studio_Project.mp4" class="img-fluid" controls=""><a href="Studio_Project.mp4">Video</a></video></p>
<p></p><figcaption class="figure-caption">Test Video</figcaption><p></p>
</figure>
</div>
<p>I’m very happy about the results!</p>
<section id="images-of-the-building-process" class="level3">
<h3 class="anchored" data-anchor-id="images-of-the-building-process">Images of the Building Process</h3>
<p>And some images of when I built the monitor!</p>
<table class="table">
<colgroup>
<col style="width: 30%">
<col style="width: 69%">
</colgroup>
<thead>
<tr class="header">
<th>What</th>
<th>Image</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Building the Camera</td>
<td><img src="20220924_200441.jpg" class="img-fluid" alt="350"></td>
</tr>
<tr class="even">
<td>Connecting the final piece of Camera</td>
<td><img src="20220924_201132.jpg" class="img-fluid" alt="350"></td>
</tr>
<tr class="odd">
<td>Building Temperature Sensor</td>
<td><img src="20220924_203146.jpg" class="img-fluid" alt="350"></td>
</tr>
<tr class="even">
<td>Connecting Temperature, Pi &amp; Camera</td>
<td><img src="20220927_174516.jpg" class="img-fluid" alt="350"></td>
</tr>
<tr class="odd">
<td>Manual Temperature Validation</td>
<td><img src="20220927_174522.jpg" class="img-fluid" alt="350"></td>
</tr>
<tr class="even">
<td>Testing the Servo</td>
<td><video src="20220927_195156.mp4" class="img-fluid" controls=""><a href="20220927_195156.mp4">Testing the Servo</a></video></td>
</tr>
<tr class="odd">
<td>Connecting all in a paper box</td>
<td><img src="20221204_191914.jpg" class="img-fluid" alt="350"></td>
</tr>
<tr class="even">
<td>First Wooden Baby Monitor Prototype</td>
<td><img src="20230108_160751.jpg" class="img-fluid" alt="350"></td>
</tr>
<tr class="odd">
<td>Final Wooden Baby Monitor</td>
<td><img src="signal-2023-01-08-20-34-58-840.jpg" class="img-fluid" alt="350"></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="a-sad-ending" class="level2">
<h2 class="anchored" data-anchor-id="a-sad-ending">A sad ending</h2>
<p>The servo motors showed to be too weak which interestingly means they’re too strong. As they try to move the housing it works slowly until it move everything at once which creates a force stronger than the pad that the monitor was standing on.</p>
<p>The end result was… Sweet release of machine breakage 😢</p>
<p><img src="20230120_185651.jpg" class="img-fluid" alt="350"> <img src="20230128_113031.jpg" class="img-fluid" alt="350"></p>
<p>That’s it for this time! Now I look forward to become a father! 👨‍👩‍👧‍👦 ~Hampus Londögård</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Copyright 2023, Hampus Londögård</div>   
      <div class="nav-footer-center">
        <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="../../about.html">About</a>
  </li>  
</ul>
      </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/hampus-londögård/">
      <i class="bi bi-linkedin" role="img" aria-label="LinkedIn">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/hlondogard">
      <i class="bi bi-twitter" role="img" aria-label="Twitter">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/lundez">
      <i class="bi bi-github" role="img" aria-label="Lundez GitHub">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml">
      <i class="bi bi-rss" role="img" aria-label="Londogard Blog RSS">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>